{"ast":null,"code":"var axios = require('axios');\nvar translateToken = require(\"./token\");\nvar language_1 = require(\"./language\");\nvar util_1 = require(\"./util\");\nfunction translate(data, options) {\n  var e;\n  options.from = options.from || 'auto';\n  options.to = options.to || 'en';\n  if (options.from) {\n    if (!language_1.isSupport(options.from)) {\n      e = new Error();\n      e.language = options.from;\n    }\n  }\n  if (!language_1.isSupport(options.to)) {\n    e = new Error();\n    e.language = options.to;\n  }\n  if (e) {\n    e.code = 400;\n    e.message = 'The language \\'' + e.language + '\\' is not supported';\n    return new Promise(function (_, reject) {\n      reject(e);\n    });\n  }\n  var tld = options.tld || 'com';\n  return translateToken.get(data.join(''), {\n    tld: tld,\n    proxy: options.proxy || false\n  }).then(function (res) {\n    const text = util_1.arrayStringify(data);\n    const url = `/translate_a/single`;\n    var query = {\n      client: options.client || 'gtx',\n      sl: options.from,\n      tl: options.to,\n      hl: options.to,\n      dt: 't',\n      ie: 'UTF-8',\n      oe: 'UTF-8',\n      otf: 1,\n      ssel: 0,\n      tsel: 0,\n      kc: 7,\n      [res.name]: res.value,\n      q: text\n    };\n    var headers = {\n      \"content-type\": \"application/json\",\n      \"Accept\": \"application/json, text/plain, */*\",\n      'X-Requested-With': 'XMLHttpRequest'\n    };\n    var extra = {\n      method: 'post',\n      headers,\n      baseURL: 'https://translate.google.' + tld,\n      url,\n      params: query,\n      proxy: options.proxy || false\n    };\n    return axios(extra).then(function (response) {\n      const res = util_1.parseMultiple(response.data[0]);\n      return Promise.resolve(res);\n    }).catch(function (error) {\n      return Promise.reject(error);\n    });\n  });\n}\nmodule.exports.default = translate;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}